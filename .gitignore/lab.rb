# @results = [
#   {
#     number: 8, 
#     name: "The Adventure of the Speckled Band", 
#     paragraphs: {
#       11 => "On glancing over my notes of the seventy odd cases in which I have during the last eight years studied the methods of my friend Sherlock Holmes, I find many tragic, some comic, a large number merely strange, but none commonplace; for, working as he did rather for the love of his art than for the acquirement of wealth, he refused to associate himself with any investigation which did not tend towards the unusual, and even the fantastic. Of all these varied cases, however, I cannot recall any which presented more singular features than that which was associated with the well-known Surrey family of the Roylotts of Stoke Moran. The events in question occurred in the early days of my association with Holmes, when we were sharing rooms as bachelors in Baker Street. It is possible that I might have placed them upon record before, but a promise of secrecy was made at the time, from which I have only been freed during the last month by the untimely death of the lady to whom the pledge was given. It is perhaps as well that the facts should now come to light, for I have reasons to know that there are widespread rumours as to the death of Dr. Grimesby Roylott which tend to make the matter even more terrible than the truth."
#     }
#   },
#   {
#     number: 10, 
#     name: "The Adventure of the Noble Bachelor",
#     paragraphs: {
#       5 => "The family of Lord Robert St. Simon has been thrown into the greatest consternation by the strange and painful episodes which have taken place in connection with his wedding. The ceremony, as shortly announced in the papers of yesterday, occurred on the previous morning; but it is only now that it has been possible to confirm the strange rumours which have been so persistently floating about. In spite of the attempts of the friends to hush the matter up, so much public attention has now been drawn to it that no good purpose can be served by affecting to disregard what is a common subject for conversation.",
#       6 => "'The ceremony, which was performed at St. George's, Hanover Square, was a very quiet one, no one being present save the father of the bride, Mr. Aloysius Doran, the Duchess of Balmoral, Lord Backwater, Lord Eustace and Lady Clara St. Simon (the younger brother and sister of the bridegroom), and Lady Alicia Whittington. The whole party proceeded afterwards to the house of Mr. Aloysius Doran, at Lancaster Gate, where breakfast had been prepared. It appears that some little trouble was caused by a woman, whose name has not been ascertained, who endeavoured to force her way into the house after the bridal party, alleging that she had some claim upon Lord St. Simon. It was only after a painful and prolonged scene that she was ejected by the butler and the footman. The bride, who had fortunately entered the house before this unpleasant interruption, had sat down to breakfast with the rest, when she complained of a sudden indisposition and retired to her room. Her prolonged absence having caused some comment, her father followed her, but learned from her maid that she had only come up to her chamber for an instant, caught up an ulster and bonnet, and hurried down to the passage. One of the footmen declared that he had seen a lady leave the house thus apparelled, but had refused to credit that it was his mistress, believing her to be with the company. On ascertaining that his daughter had disappeared, Mr. Aloysius Doran, in conjunction with the bridegroom, instantly put themselves in communication with the police, and very energetic inquiries are being made, which will probably result in a speedy clearing up of this very singular business. Up to a late hour last night, however, nothing had transpired as to the whereabouts of the missing lady. There are rumours of foul play in the matter, and it is said that the police have caused the arrest of the woman who had caused the original disturbance, in the belief that, from jealousy or some other motive, she may have been concerned in the strange disappearance of the bride.'"
#     }
#   }
# ]

@results = [{:number=>8, :name=>"The Adventure of the Speckled Band\n", :paragraphs=>{0=>"On glancing over my notes of the seventy odd cases in which I\nhave during the last eight years studied the methods of my friend\nSherlock Holmes, I find many tragic, some comic, a large number\nmerely strange, but none commonplace; for, working as he did\nrather for the love of his art than for the acquirement of\nwealth, he refused to associate himself with any investigation\nwhich did not tend towards the unusual, and even the fantastic.\nOf all these varied cases, however, I cannot recall any which\npresented more singular features than that which was associated\nwith the well-known Surrey family of the Roylotts of Stoke Moran.\nThe events in question occurred in the early days of my\nassociation with Holmes, when we were sharing rooms as bachelors\nin Baker Street. It is possible that I might have placed them\nupon record before, but a promise of secrecy was made at the\ntime, from which I have only been freed during the last month by\nthe untimely death of the lady to whom the pledge was given. It\nis perhaps as well that the facts should now come to light, for I\nhave reasons to know that there are widespread rumours as to the\ndeath of Dr. Grimesby Roylott which tend to make the matter even\nmore terrible than the truth."}}, {:number=>10, :name=>"The Adventure of the Noble Bachelor\n", :paragraphs=>{37=>"\"'The family of Lord Robert St. Simon has been thrown into the\ngreatest consternation by the strange and painful episodes which\nhave taken place in connection with his wedding. The ceremony, as\nshortly announced in the papers of yesterday, occurred on the\nprevious morning; but it is only now that it has been possible to\nconfirm the strange rumours which have been so persistently\nfloating about. In spite of the attempts of the friends to hush\nthe matter up, so much public attention has now been drawn to it\nthat no good purpose can be served by affecting to disregard what\nis a common subject for conversation.", 38=>"\"'The ceremony, which was performed at St. George's, Hanover\nSquare, was a very quiet one, no one being present save the\nfather of the bride, Mr. Aloysius Doran, the Duchess of Balmoral,\nLord Backwater, Lord Eustace and Lady Clara St. Simon (the\nyounger brother and sister of the bridegroom), and Lady Alicia\nWhittington. The whole party proceeded afterwards to the house of\nMr. Aloysius Doran, at Lancaster Gate, where breakfast had been\nprepared. It appears that some little trouble was caused by a\nwoman, whose name has not been ascertained, who endeavoured to\nforce her way into the house after the bridal party, alleging\nthat she had some claim upon Lord St. Simon. It was only after a\npainful and prolonged scene that she was ejected by the butler\nand the footman. The bride, who had fortunately entered the house\nbefore this unpleasant interruption, had sat down to breakfast\nwith the rest, when she complained of a sudden indisposition and\nretired to her room. Her prolonged absence having caused some\ncomment, her father followed her, but learned from her maid that\nshe had only come up to her chamber for an instant, caught up an\nulster and bonnet, and hurried down to the passage. One of the\nfootmen declared that he had seen a lady leave the house thus\napparelled, but had refused to credit that it was his mistress,\nbelieving her to be with the company. On ascertaining that his\ndaughter had disappeared, Mr. Aloysius Doran, in conjunction with\nthe bridegroom, instantly put themselves in communication with\nthe police, and very energetic inquiries are being made, which\nwill probably result in a speedy clearing up of this very\nsingular business. Up to a late hour last night, however, nothing\nhad transpired as to the whereabouts of the missing lady. There\nare rumours of foul play in the matter, and it is said that the\npolice have caused the arrest of the woman who had caused the\noriginal disturbance, in the belief that, from jealousy or some\nother motive, she may have been concerned in the strange\ndisappearance of the bride.'\""}}]

# def strongify(target)
#   @results.each do |result|
#     result[:paragraphs].values.map! do |para|
#       strong_start = para.index(target)
#       strong_end = strong_start + target.length

#       para.insert(strong_end, "<strong>")
#       para.insert(strong_start, "</strong>")
#       puts para
#     end
#     #find location where target begins
#     #use this + length of target to determine what needs to be highlighted
#     #figure out how to convey this logic in ERB to turn it into <strong> tags
#   end
# end

def strongify(target)
  strong_tag_loc = []
  
  @results.each do |result|
    result[:paragraphs].values.map! do |para|
      strong_start = para.index(target)
      strong_end = strong_start + target.length
      p strong_start
      p strong_end
      p strong_tag_loc
      strong_tag_loc.push(strong_start, strong_end)
      p strong_tag_loc
      
    end
    #find location where target begins
    #use this + length of target to determine what needs to be highlighted
    #figure out how to convey this logic in ERB to turn it into <strong> tags
  end
  strong_tag_loc
end


def strongify(target)
  @results.each do |result|
    tag_loc = []
    result[:paragraphs].values.map! do |para|
      strong_start = para.index(target)
      strong_end = strong_start + target.length

      para.insert(strong_end, "<strong>")
      para.insert(strong_start, "</strong>")
     
      tag_loc = [strong_start, strong_end]
    end
    @results[:strong_tag] = tag_loc
    p @results
    #find location where target begins
    #use this + length of target to determine what needs to be highlighted
    #figure out how to convey this logic in ERB to turn it into <strong> tags
  end
end

strongify("rumours")